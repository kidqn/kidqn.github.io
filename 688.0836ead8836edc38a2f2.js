(self.webpackChunkbluecore=self.webpackChunkbluecore||[]).push([[688],{7136:(t,e,i)=>{"use strict";i.d(e,{w:()=>n});var s=i(7716);let n=(()=>{class t{constructor(){this.class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bold w-200px",this.dataKtMenu="true"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-dropdown-menu2"]],hostVars:3,hostBindings:function(t,e){2&t&&(s.uIk("data-kt-menu",e.dataKtMenu),s.Tol(e.class))},decls:33,vars:0,consts:[[1,"menu-item","px-3"],[1,"menu-content","fs-6","text-dark","fw-bolder","px-3","py-4"],[1,"separator","mb-3","opacity-75"],[1,"menu-link","px-3","cursor-pointer"],["data-kt-menu-trigger","hover","data-kt-menu-placement","right-start","data-kt-menu-flip","left-start, top",1,"menu-item","px-3"],[1,"menu-title"],[1,"menu-arrow"],[1,"menu-sub","menu-sub-dropdown","w-175px","py-4"],[1,"separator","mt-3","opacity-75"],[1,"menu-content","px-3","py-3"],[1,"btn","btn-primary","btn-sm","px-4","cursor-pointer"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s._uU(2," Quick Actions "),s.qZA(),s.qZA(),s._UZ(3,"div",2),s.TgZ(4,"div",0),s.TgZ(5,"a",3),s._uU(6," New Ticket "),s.qZA(),s.qZA(),s.TgZ(7,"div",0),s.TgZ(8,"a",3),s._uU(9," New Customer "),s.qZA(),s.qZA(),s.TgZ(10,"div",4),s.TgZ(11,"a",3),s.TgZ(12,"span",5),s._uU(13,"New Group"),s.qZA(),s._UZ(14,"span",6),s.qZA(),s.TgZ(15,"div",7),s.TgZ(16,"div",0),s.TgZ(17,"a",3),s._uU(18," Admin Group "),s.qZA(),s.qZA(),s.TgZ(19,"div",0),s.TgZ(20,"a",3),s._uU(21," Staff Group "),s.qZA(),s.qZA(),s.TgZ(22,"div",0),s.TgZ(23,"a",3),s._uU(24," Member Group "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(25,"div",0),s.TgZ(26,"a",3),s._uU(27," New Contact "),s.qZA(),s.qZA(),s._UZ(28,"div",8),s.TgZ(29,"div",0),s.TgZ(30,"div",9),s.TgZ(31,"a",10),s._uU(32," Generate Reports "),s.qZA(),s.qZA(),s.qZA())},encapsulation:2}),t})()},4688:(t,e,i)=>{"use strict";i.r(e),i.d(e,{CampaignsModule:()=>Ci});var s=i(8583),n=i(2789),o=i(3679),r=i(7716),a=i(9490),h=i(9765),l=i(5917),c=i(7574),d=i(2759),p=i(6465),u=i(6102);const g=new class extends u.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let i,s=-1,n=e.length;t=t||e.shift();do{if(i=t.execute(t.state,t.delay))break}while(++s<n&&(t=e.shift()));if(this.active=!1,i){for(;++s<n&&(t=e.shift());)t.unsubscribe();throw i}}}(class extends p.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,i=0){if(null!==i&&i>0||null===i&&this.delay>0)return super.recycleAsyncId(t,e,i);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}});i(4581);var _=i(5319),m=(i(5639),i(7519)),f=i(3637),v=i(5345);class b{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new y(t,this.durationSelector))}}class y extends v.Ds{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let i;try{const{durationSelector:e}=this;i=e(t)}catch(e){return this.destination.error(e)}const s=(0,v.ft)(i,new v.IY(this));!s||s.closed?this.clearThrottle():this.add(this.throttled=s)}}clearThrottle(){const{value:t,hasValue:e,throttled:i}=this;i&&(this.remove(i),this.throttled=void 0,i.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var w=i(6797);function x(t,e=f.P){return i=()=>(0,w.H)(t,e),function(t){return t.lift(new b(i))};var i}var S=i(5435),Z=i(6782),D=i(9761);i(7393);var P=i(3190),T=(i(9643),i(521)),k=i(946);let C=(()=>{class t{constructor(t,e,i){this._ngZone=t,this._platform=e,this._scrolled=new h.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new c.y(e=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(x(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,l.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const i=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe((0,S.h)(t=>!t||i.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&e.push(s)}),e}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,e){let i=(0,a.fI)(e),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const t=this._getWindow();return(0,d.R)(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.R0b),r.LFG(T.t4),r.LFG(s.K0,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.R0b),r.LFG(T.t4),r.LFG(s.K0,8))},token:t,providedIn:"root"}),t})(),E=(()=>{class t{constructor(t,e,i){this._platform=t,this._change=new h.xQ,this._changeListener=t=>{this._change.next(t)},this._document=i,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+e,height:i,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,e=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||e.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||e.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(x(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(T.t4),r.LFG(r.R0b),r.LFG(s.K0,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(T.t4),r.LFG(r.R0b),r.LFG(s.K0,8))},token:t,providedIn:"root"}),t})(),R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[k.vT,T.ud,R],k.vT,R]}),t})();var q=i(9238),O=i(6561);function L(t){const{subscriber:e,counter:i,period:s}=t;e.next(i),this.schedule({subscriber:e,counter:i+1,period:s},s)}var F=i(6682),I=i(8002),M=i(5257),G=i(8307);function Q(t,e,i){for(let s in e)if(e.hasOwnProperty(s)){const n=e[s];n?t.setProperty(s,n,(null==i?void 0:i.has(s))?"important":""):t.removeProperty(s)}return t}function N(t,e){const i=e?"":"none";Q(t.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":i,"-ms-user-select":i,"-webkit-user-select":i,"-moz-user-select":i})}function B(t,e,i){Q(t.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},i)}function U(t,e){return e&&"none"!=e?t+" "+e:t}function Y(t){const e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function V(t,e){return t.getPropertyValue(e).split(",").map(t=>t.trim())}function H(t){const e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function z(t,e,i){const{top:s,bottom:n,left:o,right:r}=t;return i>=s&&i<=n&&e>=o&&e<=r}function J(t,e,i){t.top+=e,t.bottom=t.top+t.height,t.left+=i,t.right=t.left+t.width}function $(t,e,i,s){const{top:n,right:o,bottom:r,left:a,width:h,height:l}=t,c=h*e,d=l*e;return s>n-d&&s<r+d&&i>a-c&&i<o+c}class j{constructor(t,e){this._document=t,this._viewportRuler=e,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),t.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:H(t)})})}handleScroll(t){const e=(0,T.sA)(t),i=this.positions.get(e);if(!i)return null;const s=e===this._document?e.documentElement:e,n=i.scrollPosition;let o,r;if(e===this._document){const t=this._viewportRuler.getViewportScrollPosition();o=t.top,r=t.left}else o=e.scrollTop,r=e.scrollLeft;const a=n.top-o,h=n.left-r;return this.positions.forEach((t,i)=>{t.clientRect&&e!==i&&s.contains(i)&&J(t.clientRect,a,h)}),n.top=o,n.left=r,{top:a,left:h}}}function X(t){const e=t.cloneNode(!0),i=e.querySelectorAll("[id]"),s=t.nodeName.toLowerCase();e.removeAttribute("id");for(let n=0;n<i.length;n++)i[n].removeAttribute("id");return"canvas"===s?et(t,e):"input"!==s&&"select"!==s&&"textarea"!==s||tt(t,e),K("canvas",t,e,et),K("input, textarea, select",t,e,tt),e}function K(t,e,i,s){const n=e.querySelectorAll(t);if(n.length){const e=i.querySelectorAll(t);for(let t=0;t<n.length;t++)s(n[t],e[t])}}let W=0;function tt(t,e){"file"!==e.type&&(e.value=t.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${W++}`)}function et(t,e){const i=e.getContext("2d");if(i)try{i.drawImage(t,0,0)}catch(s){}}const it=(0,T.i$)({passive:!0}),st=(0,T.i$)({passive:!1}),nt=new Set(["position"]);class ot{constructor(t,e,i,s,n,o){this._config=e,this._document=i,this._ngZone=s,this._viewportRuler=n,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new h.xQ,this._pointerMoveSubscription=_.w.EMPTY,this._pointerUpSubscription=_.w.EMPTY,this._scrollSubscription=_.w.EMPTY,this._resizeSubscription=_.w.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new h.xQ,this.started=new h.xQ,this.released=new h.xQ,this.ended=new h.xQ,this.entered=new h.xQ,this.exited=new h.xQ,this.dropped=new h.xQ,this.moved=this._moveEvents,this._pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){const e=this._handles.find(e=>{const i=(0,T.sA)(t);return!!i&&(i===e||e.contains(i))});!e||this._disabledHandles.has(e)||this.disabled||this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)},this._pointerMove=t=>{const e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging){if(Math.abs(e.x-this._pickupPositionOnPage.x)+Math.abs(e.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const e=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),i=this._dropContainer;if(!e)return void this._endDragSequence(t);i&&(i.isDragging()||i.isReceiving())||(t.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(t)))}return}this._boundaryElement&&(this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect())),t.preventDefault();const i=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,e);else{const t=this._activeTransform;t.x=i.x-this._pickupPositionOnPage.x+this._passiveTransform.x,t.y=i.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(t.x,t.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${t.x} ${t.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:t,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})},this._pointerUp=t=>{this._endDragSequence(t)},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new j(i,n),o.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=(0,a.Ig)(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(t=>N(t,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(t=>(0,a.fI)(t)),this._handles.forEach(t=>N(t,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&e.add(t)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=(0,a.fI)(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,st),e.addEventListener("touchstart",this._pointerDown,it)}),this._initialTransform=void 0,this._rootElement=e),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?(0,a.fI)(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&ht(this._rootElement),ht(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),N(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),N(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&ht(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&ht(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){lt(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const t=this._rootElement,i=t.parentNode,s=this._placeholder=this._createPlaceholderElement(),n=this._anchor=this._anchor||this._document.createComment(""),o=this._getShadowRoot();i.insertBefore(n,t),this._initialTransform=t.style.transform||"",this._preview=this._createPreviewElement(),B(t,!1,nt),this._document.body.appendChild(i.replaceChild(s,t)),this._getPreviewInsertionPoint(i,o).appendChild(this._preview),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const i=this.isDragging(),s=lt(e),n=!s&&0!==e.button,o=this._rootElement,r=(0,T.sA)(e),a=!s&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),h=s?(0,q.yG)(e):(0,q.X6)(e);if(r&&r.draggable&&"mousedown"===e.type&&e.preventDefault(),i||n||a||h)return;this._handles.length&&(this._rootElementTapHighlight=o.style.webkitTapHighlightColor||"",o.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>this._updateOnScroll(t)),this._boundaryElement&&(this._boundaryRect=H(this._boundaryElement));const l=this._previewTemplate;this._pickupPositionInElement=l&&l.template&&!l.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);const c=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:c.x,y:c.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){B(this._rootElement,!0,nt),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),s=this._getPointerPositionOnPage(t),n=this._getDragDistance(s),o=e._isOverContainer(s.x,s.y);this.ended.next({source:this,distance:n,dropPoint:s}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:n,dropPoint:s}),e.drop(this,i,this._initialIndex,this._initialContainer,o,n,s),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:s}){let n=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!n&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(n=this._initialContainer),n&&n!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=n,this._dropContainer.enter(this,t,e,n===this._initialContainer&&n.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:n,currentIndex:n.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,s),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,i=t?t.template:null;let s;if(i&&t){const e=t.matchSize?this._rootElement.getBoundingClientRect():null,n=t.viewContainer.createEmbeddedView(i,t.context);n.detectChanges(),s=ct(n,this._document),this._previewRef=n,t.matchSize?dt(s,e):s.style.transform=rt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const t=this._rootElement;s=X(t),dt(s,t.getBoundingClientRect()),this._initialTransform&&(s.style.transform=this._initialTransform)}return Q(s.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},nt),N(s,!1),s.classList.add("cdk-drag-preview"),s.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(t=>s.classList.add(t)):s.classList.add(e)),s}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function(t){const e=getComputedStyle(t),i=V(e,"transition-property"),s=i.find(t=>"transform"===t||"all"===t);if(!s)return 0;const n=i.indexOf(s),o=V(e,"transition-duration"),r=V(e,"transition-delay");return Y(o[n])+Y(r[n])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{const i=e=>{(!e||(0,T.sA)(e)===this._preview&&"transform"===e.propertyName)&&(this._preview.removeEventListener("transitionend",i),t(),clearTimeout(s))},s=setTimeout(i,1.5*e);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=ct(this._placeholderRef,this._document)):i=X(this._rootElement),i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e){const i=this._rootElement.getBoundingClientRect(),s=t===this._rootElement?null:t,n=s?s.getBoundingClientRect():i,o=lt(e)?e.targetTouches[0]:e,r=this._getViewportScrollPosition();return{x:n.left-i.left+(o.pageX-n.left-r.left),y:n.top-i.top+(o.pageY-n.top-r.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),i=lt(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,s=i.pageX-e.left,n=i.pageY-e.top;if(this._ownerSVGElement){const t=this._ownerSVGElement.getScreenCTM();if(t){const e=this._ownerSVGElement.createSVGPoint();return e.x=s,e.y=n,e.matrixTransform(t.inverse())}}return{x:s,y:n}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:i,y:s}=this.constrainPosition?this.constrainPosition(t,this):t;if("x"===this.lockAxis||"x"===e?s=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==e||(i=this._pickupPositionOnPage.x),this._boundaryRect){const{x:t,y:e}=this._pickupPositionInElement,n=this._boundaryRect,o=this._previewRect,r=n.top+e,a=n.bottom-(o.height-e);i=at(i,n.left+t,n.right-(o.width-t)),s=at(s,r,a)}return{x:i,y:s}}_updatePointerDirectionDelta(t){const{x:e,y:i}=t,s=this._pointerDirectionDelta,n=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-n.x),r=Math.abs(i-n.y);return o>this._config.pointerDirectionChangeThreshold&&(s.x=e>n.x?1:-1,n.x=e),r>this._config.pointerDirectionChangeThreshold&&(s.y=i>n.y?1:-1,n.y=i),s}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,N(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,st),t.removeEventListener("touchstart",this._pointerDown,it)}_applyRootElementTransform(t,e){const i=rt(t,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform&&"none"!=this._rootElement.style.transform?this._rootElement.style.transform:""),this._rootElement.style.transform=U(i,this._initialTransform)}_applyPreviewTransform(t,e){var i;const s=(null===(i=this._previewTemplate)||void 0===i?void 0:i.template)?void 0:this._initialTransform,n=rt(t,e);this._preview.style.transform=U(n,s)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._boundaryElement.getBoundingClientRect(),s=this._rootElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===s.width&&0===s.height)return;const n=i.left-s.left,o=s.right-i.right,r=i.top-s.top,a=s.bottom-i.bottom;i.width>s.width?(n>0&&(t+=n),o>0&&(t-=o)):t=0,i.height>s.height?(r>0&&(e+=r),a>0&&(e-=a)):e=0,t===this._passiveTransform.x&&e===this._passiveTransform.y||this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:lt(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const i=(0,T.sA)(t);this._boundaryRect&&(i===this._document||i!==this._boundaryElement&&i.contains(this._boundaryElement))&&J(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){const t=this._parentPositions.positions.get(this._document);return t?t.scrollPosition:this._viewportRuler.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,T.kV)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const i=this._previewContainer||"global";if("parent"===i)return t;if("global"===i){const t=this._document;return e||t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||t.body}return(0,a.fI)(i)}}function rt(t,e){return`translate3d(${Math.round(t)}px, ${Math.round(e)}px, 0)`}function at(t,e,i){return Math.max(e,Math.min(i,t))}function ht(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function lt(t){return"t"===t.type[0]}function ct(t,e){const i=t.rootNodes;if(1===i.length&&i[0].nodeType===e.ELEMENT_NODE)return i[0];const s=e.createElement("div");return i.forEach(t=>s.appendChild(t)),s}function dt(t,e){t.style.width=`${e.width}px`,t.style.height=`${e.height}px`,t.style.transform=rt(e.left,e.top)}function pt(t,e,i){const s=ut(e,t.length-1),n=ut(i,t.length-1);if(s===n)return;const o=t[s],r=n<s?-1:1;for(let a=s;a!==n;a+=r)t[a]=t[a+r];t[n]=o}function ut(t,e){return Math.max(0,Math.min(e,t))}class gt{constructor(t,e,i,s,n){this._dragDropRegistry=e,this._ngZone=s,this._viewportRuler=n,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new h.xQ,this.entered=new h.xQ,this.exited=new h.xQ,this.dropped=new h.xQ,this.sorted=new h.xQ,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=_.w.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new h.xQ,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function(t=0,e=f.P){return(!(0,O.k)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=f.P),new c.y(i=>(i.add(e.schedule(L,t,{subscriber:i,counter:0,period:t})),i))}(0,g).pipe((0,Z.R)(this._stopScrollTimers)).subscribe(()=>{const t=this._scrollNode,e=this.autoScrollStep;1===this._verticalScrollDirection?mt(t,-e):2===this._verticalScrollDirection&&mt(t,e),1===this._horizontalScrollDirection?ft(t,-e):2===this._horizontalScrollDirection&&ft(t,e)})},this.element=(0,a.fI)(t),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new j(i,n)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,s){let n;this._draggingStarted(),null==s?(n=this.sortingDisabled?this._draggables.indexOf(t):-1,-1===n&&(n=this._getItemIndexFromPointerPosition(t,e,i))):n=s;const o=this._activeDraggables,r=o.indexOf(t),h=t.getPlaceholderElement();let l=o[n];if(l===t&&(l=o[n+1]),r>-1&&o.splice(r,1),l&&!this._dragDropRegistry.isDragging(l)){const e=l.getRootElement();e.parentElement.insertBefore(h,e),o.splice(n,0,t)}else if(this._shouldEnterAsFirstChild(e,i)){const e=o[0].getRootElement();e.parentNode.insertBefore(h,e),o.unshift(t)}else(0,a.fI)(this.element).appendChild(h),o.push(t);h.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,s,n,o,r){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:s,isPointerOverContainer:n,distance:o,dropPoint:r})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(e.filter(t=>t.isDragging()).every(e=>-1===t.indexOf(e))?this._reset():this._cacheItems()),this}withDirection(t){return this._direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._orientation=t,this}withScrollableParents(t){const e=(0,a.fI)(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?_t("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,e=>e.drag===t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,s){if(this.sortingDisabled||!this._clientRect||!$(this._clientRect,.05,e,i))return;const n=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,e,i,s);if(-1===o&&n.length>0)return;const r="horizontal"===this._orientation,a=_t(n,e=>e.drag===t),h=n[o],l=h.clientRect,c=a>o?1:-1,d=this._getItemOffsetPx(n[a].clientRect,l,c),p=this._getSiblingOffsetPx(a,n,c),u=n.slice();pt(n,a,o),this.sorted.next({previousIndex:a,currentIndex:o,container:this,item:t}),n.forEach((e,i)=>{if(u[i]===e)return;const s=e.drag===t,n=s?d:p,o=s?t.getPlaceholderElement():e.drag.getRootElement();e.offset+=n,r?(o.style.transform=U(`translate3d(${Math.round(e.offset)}px, 0, 0)`,e.initialTransform),J(e.clientRect,0,n)):(o.style.transform=U(`translate3d(0, ${Math.round(e.offset)}px, 0)`,e.initialTransform),J(e.clientRect,n,0))}),this._previousSwap.overlaps=z(l,e,i),this._previousSwap.drag=h.drag,this._previousSwap.delta=r?s.x:s.y}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,s=0,n=0;if(this._parentPositions.positions.forEach((o,r)=>{r!==this._document&&o.clientRect&&!i&&$(o.clientRect,.05,t,e)&&([s,n]=function(t,e,i,s){const n=vt(e,s),o=bt(e,i);let r=0,a=0;if(n){const e=t.scrollTop;1===n?e>0&&(r=1):t.scrollHeight-e>t.clientHeight&&(r=2)}if(o){const e=t.scrollLeft;1===o?e>0&&(a=1):t.scrollWidth-e>t.clientWidth&&(a=2)}return[r,a]}(r,o.clientRect,t,e),(s||n)&&(i=r))}),!s&&!n){const{width:o,height:r}=this._viewportRuler.getViewportSize(),a={width:o,height:r,top:0,right:o,bottom:r,left:0};s=vt(a,e),n=bt(a,t),i=window}!i||s===this._verticalScrollDirection&&n===this._horizontalScrollDirection&&i===this._scrollNode||(this._verticalScrollDirection=s,this._horizontalScrollDirection=n,this._scrollNode=i,(s||n)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=(0,a.fI)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=(0,a.fI)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_cacheItemPositions(){const t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(t=>{const e=t.getVisibleElement();return{drag:t,offset:0,initialTransform:e.style.transform||"",clientRect:H(e)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_reset(){this._isDragging=!1;const t=(0,a.fI)(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(t=>{var e;const i=t.getRootElement();if(i){const s=null===(e=this._itemPositions.find(e=>e.drag===t))||void 0===e?void 0:e.initialTransform;i.style.transform=s||""}}),this._siblings.forEach(t=>t._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(t,e,i){const s="horizontal"===this._orientation,n=e[t].clientRect,o=e[t+-1*i];let r=n[s?"width":"height"]*i;if(o){const t=s?"left":"top",e=s?"right":"bottom";-1===i?r-=o.clientRect[t]-n[e]:r+=n[t]-o.clientRect[e]}return r}_getItemOffsetPx(t,e,i){const s="horizontal"===this._orientation;let n=s?e.left-t.left:e.top-t.top;return-1===i&&(n+=s?e.width-t.width:e.height-t.height),n}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,s="horizontal"===this._orientation;if(i[0].drag!==this._activeDraggables[0]){const n=i[i.length-1].clientRect;return s?t>=n.right:e>=n.bottom}{const n=i[0].clientRect;return s?t<=n.left:e<=n.top}}_getItemIndexFromPointerPosition(t,e,i,s){const n="horizontal"===this._orientation,o=_t(this._itemPositions,({drag:o,clientRect:r},a,h)=>{if(o===t)return h.length<2;if(s){const t=n?s.x:s.y;if(o===this._previousSwap.drag&&this._previousSwap.overlaps&&t===this._previousSwap.delta)return!1}return n?e>=Math.floor(r.left)&&e<Math.floor(r.right):i>=Math.floor(r.top)&&i<Math.floor(r.bottom)});return-1!==o&&this.sortPredicate(o,t,this)?o:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(t,e){return null!=this._clientRect&&z(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(s=>s._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._clientRect||!z(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;const s=this._getShadowRoot().elementFromPoint(e,i);if(!s)return!1;const n=(0,a.fI)(this.element);return s===n||n.contains(s)}_startReceiving(t,e){const i=this._activeSiblings;!i.has(t)&&e.every(t=>this.enterPredicate(t,this)||this._draggables.indexOf(t)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&(this._itemPositions.forEach(({clientRect:t})=>{J(t,e.top,e.left)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=(0,T.kV)((0,a.fI)(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._activeDraggables.filter(t=>t.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function _t(t,e){for(let i=0;i<t.length;i++)if(e(t[i],i,t))return i;return-1}function mt(t,e){t===window?t.scrollBy(0,e):t.scrollTop+=e}function ft(t,e){t===window?t.scrollBy(e,0):t.scrollLeft+=e}function vt(t,e){const{top:i,bottom:s,height:n}=t,o=.05*n;return e>=i-o&&e<=i+o?1:e>=s-o&&e<=s+o?2:0}function bt(t,e){const{left:i,right:s,width:n}=t,o=.05*n;return e>=i-o&&e<=i+o?1:e>=s-o&&e<=s+o?2:0}const yt=(0,T.i$)({passive:!1,capture:!0});let wt=(()=>{class t{constructor(t,e){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=t=>t.isDragging(),this.pointerMove=new h.xQ,this.pointerUp=new h.xQ,this.scroll=new h.xQ,this._preventDefaultWhileDragging=t=>{this._activeDragInstances.length>0&&t.preventDefault()},this._persistentTouchmoveListener=t=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&t.preventDefault(),this.pointerMove.next(t))},this._document=e}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,yt)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,yt)}startDragging(t,e){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const t=e.type.startsWith("touch");this._globalListeners.set(t?"touchend":"mouseup",{handler:t=>this.pointerUp.next(t),options:!0}).set("scroll",{handler:t=>this.scroll.next(t),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:yt}),t||this._globalListeners.set("mousemove",{handler:t=>this.pointerMove.next(t),options:yt}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((t,e)=>{this._document.addEventListener(e,t.handler,t.options)})})}}stopDragging(t){const e=this._activeDragInstances.indexOf(t);e>-1&&(this._activeDragInstances.splice(e,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const e=[this.scroll];return t&&t!==this._document&&e.push(new c.y(e=>this._ngZone.runOutsideAngular(()=>{const i=t=>{this._activeDragInstances.length&&e.next(t)};return t.addEventListener("scroll",i,!0),()=>{t.removeEventListener("scroll",i,!0)}}))),(0,F.T)(...e)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,e)=>{this._document.removeEventListener(e,t.handler,t.options)}),this._globalListeners.clear()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.R0b),r.LFG(s.K0))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.R0b),r.LFG(s.K0))},token:t,providedIn:"root"}),t})();const xt={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let St=(()=>{class t{constructor(t,e,i,s){this._document=t,this._ngZone=e,this._viewportRuler=i,this._dragDropRegistry=s}createDrag(t,e=xt){return new ot(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new gt(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s.K0),r.LFG(r.R0b),r.LFG(E),r.LFG(wt))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(s.K0),r.LFG(r.R0b),r.LFG(E),r.LFG(wt))},token:t,providedIn:"root"}),t})();const Zt=new r.OlP("CDK_DRAG_PARENT"),Dt=new r.OlP("CdkDropListGroup");let Pt=(()=>{class t{constructor(){this._items=new Set,this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=(0,a.Ig)(t)}ngOnDestroy(){this._items.clear()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","cdkDropListGroup",""]],inputs:{disabled:["cdkDropListGroupDisabled","disabled"]},exportAs:["cdkDropListGroup"],features:[r._Bn([{provide:Dt,useExisting:t}])]}),t})();const Tt=new r.OlP("CDK_DRAG_CONFIG");let kt=0;const Ct=new r.OlP("CdkDropList");let Et=(()=>{class t{constructor(e,i,s,n,o,a,l){this.element=e,this._changeDetectorRef=s,this._scrollDispatcher=n,this._dir=o,this._group=a,this._destroyed=new h.xQ,this.connectedTo=[],this.id="cdk-drop-list-"+kt++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new r.vpe,this.entered=new r.vpe,this.exited=new r.vpe,this.sorted=new r.vpe,this._unsortedItems=new Set,this._dropListRef=i.createDropList(e),this._dropListRef.data=this,l&&this._assignDefaults(l),this._dropListRef.enterPredicate=(t,e)=>this.enterPredicate(t.data,e.data),this._dropListRef.sortPredicate=(t,e,i)=>this.sortPredicate(t,e.data,i.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),t._dropLists.push(this),a&&a._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(t){this._dropListRef.disabled=this._disabled=(0,a.Ig)(t)}addItem(t){this._unsortedItems.add(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(t){this._unsortedItems.delete(t),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((t,e)=>t._dragRef.getVisibleElement().compareDocumentPosition(e._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const e=t._dropLists.indexOf(this);e>-1&&t._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe((0,D.O)(this._dir.value),(0,Z.R)(this._destroyed)).subscribe(t=>e.withDirection(t)),e.beforeStarted.subscribe(()=>{const i=(0,a.Eq)(this.connectedTo).map(e=>"string"==typeof e?t._dropLists.find(t=>t.id===e):e);if(this._group&&this._group._items.forEach(t=>{-1===i.indexOf(t)&&i.push(t)}),!this._scrollableParentsResolved){const t=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(t=>t.getElementRef().nativeElement);this._dropListRef.withScrollableParents(t),this._scrollableParentsResolved=!0}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=(0,a.Ig)(this.sortingDisabled),e.autoScrollDisabled=(0,a.Ig)(this.autoScrollDisabled),e.autoScrollStep=(0,a.su)(this.autoScrollStep,2),e.connectedTo(i.filter(t=>t&&t!==this).map(t=>t._dropListRef)).withOrientation(this.orientation)})}_handleEvents(t){t.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(t=>{this.entered.emit({container:this,item:t.item.data,currentIndex:t.currentIndex})}),t.exited.subscribe(t=>{this.exited.emit({container:this,item:t.item.data}),this._changeDetectorRef.markForCheck()}),t.sorted.subscribe(t=>{this.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:this,item:t.item.data})}),t.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance,dropPoint:t.dropPoint}),this._changeDetectorRef.markForCheck()})}_assignDefaults(t){const{lockAxis:e,draggingDisabled:i,sortingDisabled:s,listAutoScrollDisabled:n,listOrientation:o}=t;this.disabled=null!=i&&i,this.sortingDisabled=null!=s&&s,this.autoScrollDisabled=null!=n&&n,this.orientation=o||"vertical",e&&(this.lockAxis=e)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(t=>t._dragRef))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(St),r.Y36(r.sBO),r.Y36(C),r.Y36(k.Is,8),r.Y36(Dt,12),r.Y36(Tt,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,e){2&t&&(r.uIk("id",e.id),r.ekj("cdk-drop-list-disabled",e.disabled)("cdk-drop-list-dragging",e._dropListRef.isDragging())("cdk-drop-list-receiving",e._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],orientation:["cdkDropListOrientation","orientation"],lockAxis:["cdkDropListLockAxis","lockAxis"],data:["cdkDropListData","data"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[r._Bn([{provide:Dt,useValue:void 0},{provide:Ct,useExisting:t}])]}),t._dropLists=[],t})();const Rt=new r.OlP("CdkDragHandle"),At=new r.OlP("CdkDragPlaceholder"),qt=new r.OlP("CdkDragPreview");let Ot=(()=>{class t{constructor(e,i,s,n,o,a,l,d,p,u,g){this.element=e,this.dropContainer=i,this._ngZone=n,this._viewContainerRef=o,this._dir=l,this._changeDetectorRef=p,this._selfHandle=u,this._parentDrag=g,this._destroyed=new h.xQ,this.started=new r.vpe,this.released=new r.vpe,this.ended=new r.vpe,this.entered=new r.vpe,this.exited=new r.vpe,this.dropped=new r.vpe,this.moved=new c.y(t=>{const e=this._dragRef.moved.pipe((0,I.U)(t=>({source:this,pointerPosition:t.pointerPosition,event:t.event,delta:t.delta,distance:t.distance}))).subscribe(t);return()=>{e.unsubscribe()}}),this._dragRef=d.createDrag(e,{dragStartThreshold:a&&null!=a.dragStartThreshold?a.dragStartThreshold:5,pointerDirectionChangeThreshold:a&&null!=a.pointerDirectionChangeThreshold?a.pointerDirectionChangeThreshold:5,zIndex:null==a?void 0:a.zIndex}),this._dragRef.data=this,t._dragInstances.push(this),a&&this._assignDefaults(a),i&&(this._dragRef._withDropContainer(i._dropListRef),i.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=(0,a.Ig)(t),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,M.q)(1),(0,Z.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const e=t.rootElementSelector,i=t.freeDragPosition;e&&!e.firstChange&&this._updateRootElement(),i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const e=t._dragInstances.indexOf(this);e>-1&&t._dragInstances.splice(e,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement,e=this.rootElementSelector?Lt(t,this.rootElementSelector):t;this._dragRef.withRootElement(e||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?Lt(this.element.nativeElement,t):(0,a.fI)(t):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){const t=this._dir,i=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,n=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.dragStartDelay="object"==typeof i&&i?i:(0,a.su)(i),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(n).withPreviewContainer(this.previewContainer||"global"),t&&e.withDirection(t.value)}}),e.beforeStarted.pipe((0,M.q)(1)).subscribe(()=>{var i,s;if(this._parentDrag)return void e.withParent(this._parentDrag._dragRef);let n=this.element.nativeElement.parentElement;for(;n;){if(null===(i=n.classList)||void 0===i?void 0:i.contains("cdk-drag")){e.withParent((null===(s=t._dragInstances.find(t=>t.element.nativeElement===n))||void 0===s?void 0:s._dragRef)||null);break}n=n.parentElement}})}_handleEvents(t){t.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(()=>{this.released.emit({source:this})}),t.ended.subscribe(t=>{this.ended.emit({source:this,distance:t.distance,dropPoint:t.dropPoint}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),t.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),t.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance,dropPoint:t.dropPoint})})}_assignDefaults(t){const{lockAxis:e,dragStartDelay:i,constrainPosition:s,previewClass:n,boundaryElement:o,draggingDisabled:r,rootElementSelector:a,previewContainer:h}=t;this.disabled=null!=r&&r,this.dragStartDelay=i||0,e&&(this.lockAxis=e),s&&(this.constrainPosition=s),n&&(this.previewClass=n),o&&(this.boundaryElement=o),a&&(this.rootElementSelector=a),h&&(this.previewContainer=h)}_setupHandlesListener(){this._handles.changes.pipe((0,D.O)(this._handles),(0,G.b)(t=>{const e=t.filter(t=>t._parentDrag===this).map(t=>t.element);this._selfHandle&&this.rootElementSelector&&e.push(this.element),this._dragRef.withHandles(e)}),(0,P.w)(t=>(0,F.T)(...t.map(t=>t._stateChanges.pipe((0,D.O)(t))))),(0,Z.R)(this._destroyed)).subscribe(t=>{const e=this._dragRef,i=t.element.nativeElement;t.disabled?e.disableHandle(i):e.enableHandle(i)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(Ct,12),r.Y36(s.K0),r.Y36(r.R0b),r.Y36(r.s_b),r.Y36(Tt,8),r.Y36(k.Is,8),r.Y36(St),r.Y36(r.sBO),r.Y36(Rt,10),r.Y36(Zt,12))},t.\u0275dir=r.lG2({type:t,selectors:[["","cdkDrag",""]],contentQueries:function(t,e,i){if(1&t&&(r.Suo(i,qt,5),r.Suo(i,At,5),r.Suo(i,Rt,5)),2&t){let t;r.iGM(t=r.CRH())&&(e._previewTemplate=t.first),r.iGM(t=r.CRH())&&(e._placeholderTemplate=t.first),r.iGM(t=r.CRH())&&(e._handles=t)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,e){2&t&&r.ekj("cdk-drag-disabled",e.disabled)("cdk-drag-dragging",e._dragRef.isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],lockAxis:["cdkDragLockAxis","lockAxis"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],boundaryElement:["cdkDragBoundary","boundaryElement"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],previewContainer:["cdkDragPreviewContainer","previewContainer"],data:["cdkDragData","data"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[r._Bn([{provide:Zt,useExisting:t}]),r.TTD]}),t._dragInstances=[],t})();function Lt(t,e){let i=t.parentElement;for(;i;){if(i.matches?i.matches(e):i.msMatchesSelector(e))return i;i=i.parentElement}return null}let Ft=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[St],imports:[R]}),t})();class It{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Mt extends It{constructor(t,e,i,s){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=s}}class Gt extends It{constructor(t,e,i){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Qt extends It{constructor(t){super(),this.element=t instanceof r.SBq?t.nativeElement:t}}class Nt extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Mt?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Gt?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Qt?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,e,i,s,n){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=s,this.attachDomPortal=t=>{const e=t.element,i=this._document.createComment("dom-portal");e.parentNode.insertBefore(i,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(e,i)})},this._document=n}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let i;return t.viewContainerRef?(i=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=e.create(t.injector||this._defaultInjector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=t,i}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context);return i.rootNodes.forEach(t=>this.outletElement.appendChild(t)),i.detectChanges(),this.setDisposeFn(()=>{let t=e.indexOf(i);-1!==t&&e.remove(t)}),this._attachedPortal=t,i}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Bt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();i(6461);const Ut=(0,T.Mq)();class Yt{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=(0,a.HM)(-this._previousScrollPosition.left),t.style.top=(0,a.HM)(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,i=this._document.body.style,s=e.scrollBehavior||"",n=i.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Ut&&(e.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Ut&&(e.scrollBehavior=s,i.scrollBehavior=n)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}class Vt{constructor(t,e,i,s){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Ht{enable(){}disable(){}attach(){}}function zt(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function Jt(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class $t{constructor(t,e,i,s){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=s,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:i}=this._viewportRuler.getViewportSize();zt(t,[{width:e,height:i,bottom:i,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let jt=(()=>{class t{constructor(t,e,i,s){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this.noop=()=>new Ht,this.close=t=>new Vt(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new Yt(this._viewportRuler,this._document),this.reposition=t=>new $t(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=s}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(C),r.LFG(E),r.LFG(r.R0b),r.LFG(s.K0))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(C),r.LFG(E),r.LFG(r.R0b),r.LFG(s.K0))},token:t,providedIn:"root"}),t})();class Xt{constructor(t){if(this.scrollStrategy=new Ht,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class Kt{constructor(t,e,i,s,n){this.offsetX=i,this.offsetY=s,this.panelClass=n,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class Wt{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let te=(()=>{class t{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s.K0))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(s.K0))},token:t,providedIn:"root"}),t})(),ee=(()=>{class t extends te{constructor(t){super(t),this._keydownListener=t=>{const e=this._attachedOverlays;for(let i=e.length-1;i>-1;i--)if(e[i]._keydownEvents.observers.length>0){e[i]._keydownEvents.next(t);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s.K0))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(s.K0))},token:t,providedIn:"root"}),t})(),ie=(()=>{class t extends te{constructor(t,e){super(t),this._platform=e,this._cursorStyleIsSet=!1,this._clickListener=t=>{const e=(0,T.sA)(t),i=this._attachedOverlays.slice();for(let s=i.length-1;s>-1;s--){const n=i[s];if(!(n._outsidePointerEvents.observers.length<1)&&n.hasAttached()){if(n.overlayElement.contains(e))break;n._outsidePointerEvents.next(t)}}}}add(t){if(super.add(t),!this._isAttached){const t=this._document.body;t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=t.style.cursor,t.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s.K0),r.LFG(T.t4))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(s.K0),r.LFG(T.t4))},token:t,providedIn:"root"}),t})(),se=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||(0,T.Oy)()){const e=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}const e=this._document.createElement("div");e.classList.add(t),(0,T.Oy)()?e.setAttribute("platform","test"):this._platform.isBrowser||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s.K0),r.LFG(T.t4))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(s.K0),r.LFG(T.t4))},token:t,providedIn:"root"}),t})();class ne{constructor(t,e,i,s,n,o,r,a,l){this._portalOutlet=t,this._host=e,this._pane=i,this._config=s,this._ngZone=n,this._keyboardDispatcher=o,this._document=r,this._location=a,this._outsideClickDispatcher=l,this._backdropElement=null,this._backdropClick=new h.xQ,this._attachments=new h.xQ,this._detachments=new h.xQ,this._locationChanges=_.w.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEvents=new h.xQ,this._outsidePointerEvents=new h.xQ,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,M.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=(0,a.HM)(this._config.width),t.height=(0,a.HM)(this._config.height),t.minWidth=(0,a.HM)(this._config.minWidth),t.minHeight=(0,a.HM)(this._config.minHeight),t.maxWidth=(0,a.HM)(this._config.maxWidth),t.maxHeight=(0,a.HM)(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(!t)return;let e;const i=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",i),this._disposeBackdrop(t)),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",i)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(i,500))}_toggleClasses(t,e,i){const s=t.classList;(0,a.Eq)(e).forEach(t=>{t&&(i?s.add(t):s.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe((0,Z.R)((0,F.T)(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.parentNode&&t.parentNode.removeChild(t),this._backdropElement===t&&(this._backdropElement=null))}}const oe="cdk-overlay-connected-position-bounding-box",re=/([A-Za-z%]+)$/;class ae{constructor(t,e,i,s,n){this._viewportRuler=e,this._document=i,this._platform=s,this._overlayContainer=n,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new h.xQ,this._resizeSubscription=_.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(oe),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,s=[];let n;for(let o of this._preferredPositions){let r=this._getOriginPoint(t,o),a=this._getOverlayPoint(r,e,o),h=this._getOverlayFit(a,e,i,o);if(h.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,r);this._canFitWithFlexibleDimensions(h,a,i)?s.push({position:o,origin:r,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(r,o)}):(!n||n.overlayFit.visibleArea<h.visibleArea)&&(n={overlayFit:h,overlayPoint:a,originPoint:r,position:o,overlayRect:e})}if(s.length){let t=null,e=-1;for(const i of s){const s=i.boundingBoxRect.width*i.boundingBoxRect.height*(i.position.weight||1);s>e&&(e=s,t=i)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(n.position,n.originPoint);this._applyPosition(n.position,n.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&he(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(oe),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let i,s;if("center"==e.originX)i=t.left+t.width/2;else{const s=this._isRtl()?t.right:t.left,n=this._isRtl()?t.left:t.right;i="start"==e.originX?s:n}return s="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:i,y:s}}_getOverlayPoint(t,e,i){let s,n;return s="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,n="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+s,y:t.y+n}}_getOverlayFit(t,e,i,s){const n=ce(e);let{x:o,y:r}=t,a=this._getOffset(s,"x"),h=this._getOffset(s,"y");a&&(o+=a),h&&(r+=h);let l=0-r,c=r+n.height-i.height,d=this._subtractOverflows(n.width,0-o,o+n.width-i.width),p=this._subtractOverflows(n.height,l,c),u=d*p;return{visibleArea:u,isCompletelyWithinViewport:n.width*n.height===u,fitsInViewportVertically:p===n.height,fitsInViewportHorizontally:d==n.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const s=i.bottom-e.y,n=i.right-e.x,o=le(this._overlayRef.getConfig().minHeight),r=le(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=r&&r<=n;return(t.fitsInViewportVertically||null!=o&&o<=s)&&a}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const s=ce(e),n=this._viewportRect,o=Math.max(t.x+s.width-n.width,0),r=Math.max(t.y+s.height-n.height,0),a=Math.max(n.top-i.top-t.y,0),h=Math.max(n.left-i.left-t.x,0);let l=0,c=0;return l=s.width<=n.width?h||-o:t.x<this._viewportMargin?n.left-i.left-t.x:0,c=s.height<=n.height?a||-r:t.y<this._viewportMargin?n.top-i.top-t.y:0,this._previousPushAmount={x:l,y:c},{x:t.x+l,y:t.y+c}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),i=new Wt(t,e);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,s=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let n=0;n<e.length;n++)e[n].style.transformOrigin=`${i} ${s}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,s=this._isRtl();let n,o,r,a,h,l;if("top"===e.overlayY)o=t.y,n=i.height-o+this._viewportMargin;else if("bottom"===e.overlayY)r=i.height-t.y+2*this._viewportMargin,n=i.height-r+this._viewportMargin;else{const e=Math.min(i.bottom-t.y+i.top,t.y),s=this._lastBoundingBoxSize.height;n=2*e,o=t.y-e,n>s&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-s/2)}if("end"===e.overlayX&&!s||"start"===e.overlayX&&s)l=i.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!s||"end"===e.overlayX&&s)h=t.x,a=i.right-t.x;else{const e=Math.min(i.right-t.x+i.left,t.x),s=this._lastBoundingBoxSize.width;a=2*e,h=t.x-e,a>s&&!this._isInitialRender&&!this._growAfterOpen&&(h=t.x-s/2)}return{top:o,left:h,bottom:r,right:l,width:a,height:n}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,n=this._overlayRef.getConfig().maxWidth;s.height=(0,a.HM)(i.height),s.top=(0,a.HM)(i.top),s.bottom=(0,a.HM)(i.bottom),s.width=(0,a.HM)(i.width),s.left=(0,a.HM)(i.left),s.right=(0,a.HM)(i.right),s.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",s.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(s.maxHeight=(0,a.HM)(t)),n&&(s.maxWidth=(0,a.HM)(n))}this._lastBoundingBoxSize=i,he(this._boundingBox.style,s)}_resetBoundingBoxStyles(){he(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){he(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},s=this._hasExactPosition(),n=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(s){const s=this._viewportRuler.getViewportScrollPosition();he(i,this._getExactOverlayY(e,t,s)),he(i,this._getExactOverlayX(e,t,s))}else i.position="static";let r="",h=this._getOffset(e,"x"),l=this._getOffset(e,"y");h&&(r+=`translateX(${h}px) `),l&&(r+=`translateY(${l}px)`),i.transform=r.trim(),o.maxHeight&&(s?i.maxHeight=(0,a.HM)(o.maxHeight):n&&(i.maxHeight="")),o.maxWidth&&(s?i.maxWidth=(0,a.HM)(o.maxWidth):n&&(i.maxWidth="")),he(this._pane.style,i)}_getExactOverlayY(t,e,i){let s={top:"",bottom:""},n=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(n=this._pushOverlayOnScreen(n,this._overlayRect,i));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return n.y-=o,"bottom"===t.overlayY?s.bottom=this._document.documentElement.clientHeight-(n.y+this._overlayRect.height)+"px":s.top=(0,a.HM)(n.y),s}_getExactOverlayX(t,e,i){let s,n={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),s=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===s?n.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":n.left=(0,a.HM)(o.x),n}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Jt(t,i),isOriginOutsideView:zt(t,i),isOverlayClipped:Jt(e,i),isOverlayOutsideView:zt(e,i)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&(0,a.Eq)(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof r.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function he(t,e){for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function le(t){if("number"!=typeof t&&null!=t){const[e,i]=t.split(re);return i&&"px"!==i?null:parseFloat(e)}return t||null}function ce(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}class de{constructor(t,e,i,s,n,o,r){this._preferredPositions=[],this._positionStrategy=new ae(i,s,n,o,r).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,i,s){const n=new Kt(t,e,i,s);return this._preferredPositions.push(n),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const pe="cdk-global-overlay-wrapper";class ue{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(pe),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:s,height:n,maxWidth:o,maxHeight:r}=i,a=!("100%"!==s&&"100vw"!==s||o&&"100%"!==o&&"100vw"!==o),h=!("100%"!==n&&"100vh"!==n||r&&"100%"!==r&&"100vh"!==r);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=h?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=h?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(pe),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let ge=(()=>{class t{constructor(t,e,i,s){this._viewportRuler=t,this._document=e,this._platform=i,this._overlayContainer=s}global(){return new ue}connectedTo(t,e,i){return new de(e,i,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new ae(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(E),r.LFG(s.K0),r.LFG(T.t4),r.LFG(se))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(E),r.LFG(s.K0),r.LFG(T.t4),r.LFG(se))},token:t,providedIn:"root"}),t})(),_e=0,me=(()=>{class t{constructor(t,e,i,s,n,o,r,a,h,l,c){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=n,this._injector=o,this._ngZone=r,this._document=a,this._directionality=h,this._location=l,this._outsideClickDispatcher=c}create(t){const e=this._createHostElement(),i=this._createPaneElement(e),s=this._createPortalOutlet(i),n=new Xt(t);return n.direction=n.direction||this._directionality.value,new ne(s,e,i,n,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id="cdk-overlay-"+_e++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(r.z2F)),new Nt(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(jt),r.LFG(se),r.LFG(r._Vd),r.LFG(ge),r.LFG(ee),r.LFG(r.zs3),r.LFG(r.R0b),r.LFG(s.K0),r.LFG(k.Is),r.LFG(s.Ye),r.LFG(ie))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const fe={provide:new r.OlP("cdk-connected-overlay-scroll-strategy"),deps:[me],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let ve=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[me,fe],imports:[[k.vT,Bt,A],A]}),t})();var be=i(2458);i(6237);let ye=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[be.si,be.BQ],be.BQ]}),t})();i(7238);var we=i(8553);let xe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[s.ez,be.BQ,we.Q8],be.BQ]}),t})();i(9193);let Se=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[T.ud]]}),t})(),Ze=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[be.rD],imports:[[Se,xe,be.BQ],Se,xe]}),t})(),De=(()=>{class t{constructor(){this.changes=new h.xQ,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(t,e){return`${t} \u2013 ${e}`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({factory:function(){return new t},token:t,providedIn:"root"}),t})();const Pe={provide:new r.OlP("mat-datepicker-scroll-strategy"),deps:[me],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let Te=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[De,Pe],imports:[[s.ez,ye,ve,q.rt,Bt,be.BQ],R]}),t})();var ke=i(1825),Ce=i(3423),Ee=i(6215),Re=i(9773),Ae=i(1841),qe=i(2340);const Oe=`${qe.N.apiUrl}/${qe.N.apiVer}/campaigns`,Le=`${qe.N.apiUrl}/${qe.N.apiVer}`;let Fe=(()=>{class t{constructor(t,e){this.http=t,this.router=e,this.unsubscribe=[],this.isLoadingSubject=new Ee.X(!1),this.isLoading$=this.isLoadingSubject.asObservable();const i=localStorage.getItem("apiToken");this.headers=new Ae.WM({"Content-Type":"application/json",Authorization:"Bearer "+JSON.parse(i).api_token})}getCampaigns(t,e){const i=(new Ae.LE).set("page",t).set("per_page",e);return this.http.get(Oe,{headers:this.headers,params:i})}getCampaign(t){return this.http.get(`${Oe}/`+t,{headers:this.headers})}createCampaign(t){return this.http.post(Oe,t,{headers:this.headers})}updateCampaign(t,e){return this.http.put(`${Oe}/`+t,e,{headers:this.headers})}createCampaignDetail(t,e){return this.http.post(`${Oe}/`+t+"/detail",{question_id:e.question_id,question_data:e.question_data,question_mapping:e.question_mapping,question_get_at:e.question_get_at,content:e.content},{headers:this.headers})}updateCampaignDetail(t,e){return this.http.put(`${Oe}/`+t+"/detail",e,{headers:this.headers})}getQuestions(t){const e=(new Ae.LE).set("q",t).set("per_page",20);return this.http.get(`${Le}/search/questions`,{headers:this.headers,params:e})}getQuestion(t){return this.http.get(`${Le}/questions/`+t+"/query",{headers:this.headers})}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ae.eN),r.LFG(Ce.F0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ie=i(7136);const Me=function(t){return["/campaigns/view",t]},Ge=function(t){return["/campaigns/edit",t]};function Qe(t,e){if(1&t&&(r.TgZ(0,"tr"),r.TgZ(1,"td"),r.TgZ(2,"div",15),r._UZ(3,"input",21),r.qZA(),r.qZA(),r.TgZ(4,"td"),r.TgZ(5,"a",22),r._uU(6),r.qZA(),r.qZA(),r.TgZ(7,"td"),r.TgZ(8,"a",23),r._uU(9),r.qZA(),r.qZA(),r.TgZ(10,"td"),r.TgZ(11,"a",23),r._uU(12),r.qZA(),r.qZA(),r.TgZ(13,"td"),r.TgZ(14,"a",23),r._uU(15),r.qZA(),r.qZA(),r.TgZ(16,"td"),r.TgZ(17,"span",24),r._uU(18),r.qZA(),r.qZA(),r.TgZ(19,"td",25),r.TgZ(20,"a",26),r._UZ(21,"span",27),r.qZA(),r.TgZ(22,"a",28),r._UZ(23,"span",27),r.qZA(),r.TgZ(24,"a",29),r._UZ(25,"span",27),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(5),r.Q6J("routerLink",r.VKq(13,Me,t.id)),r.xp6(1),r.hij(" ",t.id," "),r.xp6(2),r.Q6J("routerLink",r.VKq(15,Me,t.id)),r.xp6(1),r.hij(" ",t.name," "),r.xp6(2),r.Q6J("routerLink",r.VKq(17,Me,t.id)),r.xp6(1),r.hij(" ",t.created_at.substr(0,10)," "),r.xp6(2),r.Q6J("routerLink",r.VKq(19,Me,t.id)),r.xp6(1),r.hij(" ",t.type," "),r.xp6(3),r.Oqu(t.status),r.xp6(3),r.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen019.svg"),r.xp6(1),r.Q6J("routerLink",r.VKq(21,Ge,t.id)),r.xp6(1),r.Q6J("inlineSVG","./assets/media/icons/duotune/art/art005.svg"),r.xp6(2),r.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen027.svg")}}let Ne=(()=>{class t{constructor(t,e,i){this.campaignsSrv=t,this.router=e,this.datepipe=i,this.campaigns$=new Ee.X([])}ngOnInit(){this.campaignsSrv.getCampaigns(1,100).subscribe(t=>{console.log(t.data),this.campaigns$.next([...t.data])})}addNewCampaign(){let t=localStorage.getItem("user");const e={name:"Campaign 1",type:"Test",created_by:1,status:"test",time_from:this.datepipe.transform(new Date,"yyyy-MM-dd HH:mm:ss")};if(t){let i=JSON.parse(t);e.user_created_by=i.first_name+" "+i.last_name,e.created_by=i.id}this.campaignsSrv.createCampaign(e).pipe((0,I.U)(t=>({id:t.id,detail:{question_id:1,question_data:"question data default",question_mapping:1,content:"Campaign content",question_get_at:"2021-01-07 11:00:00"}})),(0,Re.zg)(t=>this.campaignsSrv.createCampaignDetail(t.id,t.detail))).subscribe(t=>{this.router.navigate([`/campaigns/edit/${t.id}`],{state:{id:t.id}})})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Fe),r.Y36(Ce.F0),r.Y36(s.uU))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-campaigns"]],decls:38,vars:4,consts:[[1,"card","mb-5","mb-xl-10"],[1,"card-body","pt-9","pb-0"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"text-muted","mt-1","fw-bold","fs-7"],[1,"card-toolbar"],["id","kt_toolbar_primary_button",1,"btn","btn-sm","btn-primary","cursor-pointer",3,"click"],["type","button","data-kt-menu-trigger","click","data-kt-menu-placement","bottom-end","data-kt-menu-flip","top-end",1,"btn","btn-sm","btn-icon","btn-color-primary","btn-active-light-primary"],[1,"svg-icon","svg-icon-2",3,"inlineSVG"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"table","table-row-bordered","table-row-gray-100","align-middle","gs-0","gy-3"],[1,"fw-bolder","text-muted"],[1,"w-25px"],[1,"form-check","form-check-sm","form-check-custom","form-check-solid"],["type","checkbox","value","1","data-kt-check","true","data-kt-check-target",".widget-13-check",1,"form-check-input"],[1,"min-w-200px"],[1,"min-w-120px"],[1,"min-w-100px","text-end"],[4,"ngFor","ngForOf"],["type","checkbox","value","1",1,"form-check-input","widget-13-check"],[1,"text-dark","fw-bolder","text-hover-primary","fs-6",3,"routerLink"],[1,"text-dark","fw-bolder","text-hover-primary","d-block","mb-1","fs-6",3,"routerLink"],[1,"badge","badge-light-success"],[1,"text-end"],["href","#",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1"],[1,"svg-icon","svg-icon-3",3,"inlineSVG"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"routerLink"],["href","#",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"h3",3),r.TgZ(4,"span",4),r._uU(5,"Danh s\xe1ch chi\u1ebfn d\u1ecbch"),r.qZA(),r.TgZ(6,"span",5),r._uU(7,"H\u01a1n 500+ chi\u1ebfn d\u1ecbch"),r.qZA(),r.qZA(),r.TgZ(8,"div",6),r.TgZ(9,"a",7),r.NdJ("click",function(){return e.addNewCampaign()}),r._uU(10," T\u1ea1o chi\u1ebfn d\u1ecbch "),r.qZA(),r.TgZ(11,"button",8),r._UZ(12,"span",9),r.qZA(),r._UZ(13,"app-dropdown-menu2"),r.qZA(),r.qZA(),r.TgZ(14,"div",10),r.TgZ(15,"div",11),r.TgZ(16,"table",12),r.TgZ(17,"thead"),r.TgZ(18,"tr",13),r.TgZ(19,"th",14),r.TgZ(20,"div",15),r._UZ(21,"input",16),r.qZA(),r.qZA(),r.TgZ(22,"th"),r._uU(23,"ID"),r.qZA(),r.TgZ(24,"th",17),r._uU(25,"T\xean chi\u1ebfn d\u1ecbch"),r.qZA(),r.TgZ(26,"th",18),r._uU(27,"Ng\xe0y th\xe1ng"),r.qZA(),r.TgZ(28,"th",18),r._uU(29,"Ki\u1ec3u"),r.qZA(),r.TgZ(30,"th",18),r._uU(31,"Tr\u1ea1ng th\xe1i"),r.qZA(),r.TgZ(32,"th",19),r._uU(33,"Ch\u1ee9c n\u0103ng"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(34,"tbody"),r.YNc(35,Qe,26,23,"tr",20),r.ALo(36,"async"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r._UZ(37,"router-outlet")),2&t&&(r.xp6(12),r.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen024.svg"),r.xp6(23),r.Q6J("ngForOf",r.lcZ(36,2,e.campaigns$)))},directives:[n.d$,Ie.w,s.sg,Ce.lC,Ce.yS],pipes:[s.Ov],encapsulation:2}),t})();var Be=i(5758),Ue=i(5304),Ye=i(6418),Ve=i(160);let He=(()=>{class t{constructor(t,e,i,s,n,o,r,a){this.campaignsSrv=t,this.providersSrv=e,this.methodsSrv=i,this.activatedRoute=s,this.router=n,this.fb=o,this.cdr=r,this.datepipe=a,this.formsCount=5,this.currentStep$=new Ee.X(1),this.isCurrentFormValid$=new Ee.X(!1),this.isLoadingListQuestionsFormat$=new Ee.X(!1),this.campaignDetail={},this.unsubscribe=[],this.initForm()}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.campaignDetail.id=t.id;const e=this.campaignsSrv.getCampaign(this.campaignDetail.id),i=this.campaignsSrv.getQuestions("");(0,Be.D)([e,i]).pipe((0,Ue.K)(t=>(0,l.of)(t.message))).subscribe(t=>{if(this.campaignDetail=t[0],this.listQuestions=[...t[1].data],this.campaignDetail.detail&&this.campaignDetail.detail.question_id){const t=this.listQuestions.filter(t=>t.id===this.campaignDetail.detail.question_id);this.campaignDetail.questionName=t.length?t[0].name:""}this.updateForm(this.campaignDetail),this.cdr.markForCheck()})}),this.methodsSrv.getMethods().pipe((0,Re.zg)(t=>(this.listMethods=[...t],this.methodsSrv.getProviderByMethod(t[0].name)))).subscribe(t=>{this.listProviders=[...t],this.campaignForm.patchValue({step2Form:{method:this.listMethods[0],provider:this.listProviders[0]}}),this.cdr.markForCheck()}),this.campaignForm.valueChanges.subscribe(t=>{console.log("generalform",t)})}nextStep(){const t=this.currentStep$.value+1;2===t&&this.updateStep1(),3===t&&this.updateStep2(),4===t&&this.updateStep3(),t>this.formsCount||this.currentStep$.next(t)}prevStep(){const t=this.currentStep$.value-1;0!==t&&this.currentStep$.next(t)}initForm(){this.campaignForm=this.fb.group({step1Form:this.fb.group({questionId:"",questionName:"",campaignName:""}),step2Form:this.fb.group({partner:"",questionMapping:"",keyMappings:this.fb.array([]),method:"",provider:""}),step3Form:this.fb.group({questionData:""}),step4Form:this.fb.group({scheduleStartDate:"",scheduleEndDate:"",scheduleStartTime:"",scheduleEndTime:""}),step5Form:this.fb.group({})})}updateForm(t){this.campaignForm.patchValue({step1Form:{campaignName:t.name?t.name:"",questionId:t.detail&&t.detail.question_id?t.detail.question_id:1,questionName:this.campaignDetail.questionName?this.campaignDetail.questionName:""},step2Form:{questionMapping:t.detail&&t.detail.question_mapping?JSON.parse(t.detail.question_mapping):""},step3Form:{questionData:t.detail&&t.detail.question_data?t.detail.question_data:""},step4Form:{scheduleStartDate:this.datepipe.transform(t.start_date?t.start_date:new Date,"MM-dd-yyyy"),scheduleEndDate:this.datepipe.transform(t.end_date?t.end_date:new Date,"MM-dd-yyyy"),scheduleStartTime:t.time_from?t.time_from:"",scheduleEndTime:t.time_to?t.time_to:""}})}updateStep1(){const t=this.campaignForm.controls.step1Form.value.questionId;t!==this.campaignDetail.detail.question_id&&this.campaignForm.patchValue({step2Form:{keyMappings:[],questionMapping:""}}),this.campaignDetail.detail.question_id=t,this.campaignForm.patchValue({step1Form:{questionId:t||1}});const e={name:this.campaignForm.controls.step1Form.value.campaignName};this.campaignsSrv.updateCampaignDetail(this.campaignDetail.id,{question_id:t}).subscribe(),this.campaignsSrv.updateCampaign(this.campaignDetail.id,e).subscribe(),this.isLoadingListQuestionsFormat$.next(!0),this.campaignsSrv.getQuestion(t).pipe((0,Ue.K)(t=>(this.isLoadingListQuestionsFormat$.next(!1),(0,l.of)(t.message)))).subscribe(t=>{this.listQuestionsFormat=Object.values(t.data.cols),this.listQuestionsDataSample=Object.values(t.data.rows[0]),console.log("question format",this.listQuestionsFormat),this.isLoadingListQuestionsFormat$.next(!1)})}updateStep2(){const t=this.campaignForm.controls.step1Form.value.questionId;let e={};this.campaignForm.controls.step2Form.value.keyMappings.forEach(t=>{e[t.key]=t.keyMap[0]});const i={question_id:t,question_mapping:JSON.stringify(e),question_get_at:this.datepipe.transform(new Date,"yyyy-MM-dd HH:mm:ss")};this.campaignsSrv.updateCampaignDetail(this.campaignDetail.id,i).subscribe(t=>{this.campaignForm.patchValue({step2Form:{questionMapping:t.detail.question_mapping?JSON.parse(t.detail.question_mapping):""}})})}updateStep3(){this.campaignsSrv.updateCampaignDetail(this.campaignDetail.id,{question_data:this.campaignForm.controls.step3Form.value.questionData}).subscribe(t=>{this.campaignForm.patchValue({step3Form:{questionData:t.detail.question_data?t.detail.question_data:""}})})}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Fe),r.Y36(Ye.j),r.Y36(Ve.O),r.Y36(Ce.gz),r.Y36(Ce.F0),r.Y36(o.qu),r.Y36(r.sBO),r.Y36(s.uU))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-campaign-detail"]],decls:0,vars:0,template:function(t,e){},styles:[".question-box[_ngcontent-%COMP%]{min-height:40px;display:flex;border:1px solid;align-items:center;justify-content:center;margin:0 0 10px}"],changeDetection:0}),t})();var ze=i(4395);const Je=["questionsSearchInput"];function $e(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"label",11),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw().changeQuestion(e)}),r.TgZ(1,"span",12),r.TgZ(2,"span",13),r.TgZ(3,"span",14),r._UZ(4,"span",15),r.qZA(),r.qZA(),r.TgZ(5,"span",16),r.TgZ(6,"span",17),r._uU(7),r.qZA(),r.TgZ(8,"span",18),r._uU(9),r.qZA(),r.qZA(),r.qZA(),r.TgZ(10,"span",19),r._UZ(11,"input",20),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(4),r.Q6J("inlineSVG","./assets/media/icons/duotune/finance/fin001.svg"),r.xp6(3),r.Oqu(t.name),r.xp6(2),r.Oqu(t.id),r.xp6(2),r.Q6J("value",t.id)}}let je=(()=>{class t{constructor(t,e,i){this.cdr=t,this.rootFormGroup=e,this.campaignsSrv=i,this.unsubscribe=[],this.searchTerm$=new h.xQ}ngOnInit(){this.initForm(),(0,d.R)(this.questionsSearchInput.nativeElement,"keyup").pipe((0,I.U)(t=>t.target.value),(0,ze.b)(400),(0,m.x)(),(0,P.w)(t=>this.campaignsSrv.getQuestions(t))).subscribe(t=>{console.log("result search",t),this.listQuestions=[...t.data],this.cdr.markForCheck()})}initForm(){this.form=this.rootFormGroup.control.get(this.formGroupName);const t=this.form.valueChanges.subscribe(t=>{console.log("step1",t)});this.unsubscribe.push(t)}ngOnChanges(t){console.log(t)}changeQuestion(t){console.log(t),this.form.patchValue({questionId:t.id,questionName:t.name})}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO),r.Y36(o.sg),r.Y36(Fe))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-campaign-step1"]],viewQuery:function(t,e){if(1&t&&r.Gf(Je,7),2&t){let t;r.iGM(t=r.CRH())&&(e.questionsSearchInput=t.first)}},inputs:{listQuestions:"listQuestions",formGroupName:"formGroupName"},features:[r.TTD],decls:16,vars:2,consts:[[1,"mb-10","fv-row"],[1,"form-label","mb-3"],["type","text","placeholder","T\xecm c\xe2u h\u1ecfi...",1,"form-control","form-control-lg","form-control-solid"],["questionsSearchInput",""],[3,"formGroup"],["type","text","formControlName","campaignName","placeholder","T\xecm c\xe2u h\u1ecfi...",1,"form-control","form-control-lg","form-control-solid"],[1,"mb-0","fv-row"],[1,"d-flex","align-items-center","form-label","mb-5"],["ngbTooltip","Monthly billing will be based on your account plan",1,"fas","fa-exclamation-circle","ms-2","fs-7"],[1,"mb-0"],["class","d-flex flex-stack mb-5 cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"d-flex","flex-stack","mb-5","cursor-pointer",3,"click"],[1,"d-flex","align-items-center","me-2"],[1,"symbol","symbol-50px","me-6"],[1,"symbol-label"],[1,"svg-icon","svg-icon-1","svg-icon-gray-600",3,"inlineSVG"],[1,"d-flex","flex-column"],[1,"fw-bolder","text-gray-800","text-hover-primary","fs-5"],[1,"fs-6","fw-bold","text-gray-400"],[1,"form-check","form-check-custom","form-check-solid"],["formControlName","questionId","type","radio",1,"form-check-input",3,"value"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"label",1),r._uU(2,"T\xecm c\xe2u h\u1ecfi"),r.qZA(),r._UZ(3,"input",2,3),r.qZA(),r.TgZ(5,"div",4),r.TgZ(6,"div",0),r.TgZ(7,"label",1),r._uU(8,"T\xean chi\u1ebfn d\u1ecbch"),r.qZA(),r._UZ(9,"input",5),r.qZA(),r.TgZ(10,"div",6),r.TgZ(11,"label",7),r._uU(12," Ch\u1ecdn c\xe2u h\u1ecfi "),r._UZ(13,"i",8),r.qZA(),r.TgZ(14,"div",9),r.YNc(15,$e,12,4,"label",10),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(5),r.Q6J("formGroup",e.form),r.xp6(10),r.Q6J("ngForOf",e.listQuestions))},directives:[o.JL,o.sg,o.Fj,o.JJ,o.u,s.sg,n.d$,o._],encapsulation:2,changeDetection:0}),t})();var Xe=i(8049);let Ke=(()=>{class t{constructor(){}ngOnInit(){}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-loading"]],decls:5,vars:0,consts:[[1,"loading-ring"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"div"),r._UZ(2,"div"),r._UZ(3,"div"),r._UZ(4,"div"),r.qZA())},styles:["[_nghost-%COMP%]{position:absolute;left:0;top:0;background:#0000004d;width:100%;height:100%;display:flex;align-items:center;justify-content:center;pointer-events:none}.loading-ring[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.loading-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border-radius:50%;animation:loading-ring 1.2s cubic-bezier(.5,0,.5,1) infinite;border:8px solid #0000;border-top-color:#fff}.loading-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{animation-delay:-.45s}.loading-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.3s}.loading-ring[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-.15s}@keyframes loading-ring{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}"]}),t})();function We(t,e){if(1&t&&(r.TgZ(0,"option",16),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.Q6J("ngValue",t),r.xp6(1),r.Oqu(t.name)}}function ti(t,e){if(1&t&&(r.TgZ(0,"option",16),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.Q6J("ngValue",t),r.xp6(1),r.Oqu(t.name)}}function ei(t,e){if(1&t&&(r.TgZ(0,"div",25),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Oqu(t)}}function ii(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"a",26),r.NdJ("click",function(){r.CHM(t);const e=r.oxw().index;return r.oxw().removeKeys(e)}),r._UZ(1,"span",27),r.qZA()}2&t&&(r.xp6(1),r.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen027.svg"))}function si(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",17),r.ynx(1,18),r.TgZ(2,"div",19),r._UZ(3,"input",20),r.qZA(),r.TgZ(4,"div",21),r.TgZ(5,"div",22),r.NdJ("cdkDropListDropped",function(e){const i=r.CHM(t).index,s=r.oxw();return s.drop(e),s.updateKeys(i)}),r.YNc(6,ei,2,1,"div",15),r.qZA(),r.qZA(),r.TgZ(7,"div",23),r.YNc(8,ii,2,1,"a",24),r.qZA(),r.BQk(),r.qZA()}if(2&t){const t=e.$implicit,i=e.index;r.xp6(1),r.Q6J("formGroupName",i),r.xp6(4),r.Q6J("cdkDropListData",t.value.keyMap)("cdkDropListSortingDisabled",!1),r.xp6(1),r.Q6J("ngForOf",t.value.keyMap),r.xp6(2),r.Q6J("ngIf",!t.value.required)}}function ni(t,e){1&t&&r._UZ(0,"app-loading")}function oi(t,e){if(1&t&&(r.TgZ(0,"div",25),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Oqu(t)}}let ri=(()=>{class t{constructor(t,e,i,s,n){this.methodsSrv=t,this.providersSrv=e,this.rootFormGroup=i,this.fb=s,this.cdr=n,this.unsubscribe=[],this.defaultKeys=[]}ngOnInit(){this.initForm()}get keyMappings(){return this.form.get("keyMappings")}initForm(){this.form=this.rootFormGroup.control.get(this.formGroupName);const t=this.form.valueChanges.pipe((0,Xe.P)()).subscribe(t=>{console.log("step2",t)});this.keyMappings.clear();const e=this.form.value.questionMapping;if(Object.keys(e).length)Object.keys(e).forEach(t=>{this.keyMappings.push(this.fb.group({key:t,keyMap:this.fb.array([e[t]])}))});else{let t=this.form.value.method.template;t&&t.split(",").forEach(t=>{this.keyMappings.push(this.fb.group({key:t,keyMap:this.fb.array([e[t]]),required:!0}))})}this.unsubscribe.push(t)}ngOnChanges(t){console.log("step2",t)}drop(t){t.previousContainer===t.container?pt(t.container.data,t.previousIndex,t.currentIndex):(t.container.data.length=0,function(t,e,i,s){const n=ut(s,e.length);t.length&&e.splice(n,0,t[i])}(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex))}updateKeys(t){console.log(t,this.keyMappings.controls)}removeKeys(t){this.keyMappings.removeAt(t)}addPartnerFormat(){this.keyMappings.push(this.fb.group({key:"newkey",keyMap:this.fb.array(["Drop here"])}))}changeMethod(t){console.log("changemethod",t)}changeProvider(t){console.log("changeprovider",t)}getConfiguration(t){this.providersSrv.getConfigurations(t).subscribe(t=>{console.log("step2 get provider",t);const e=JSON.parse(t.value);Object.keys(e).forEach(t=>{this.keyMappings.push(this.fb.group({key:t,keyMap:this.fb.array([e[t]])}))}),this.cdr.markForCheck()})}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ve.O),r.Y36(Ye.j),r.Y36(o.sg),r.Y36(o.qu),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-campaign-step2"]],inputs:{formGroupName:"formGroupName",listMethods:"listMethods",listProviders:"listProviders",listQuestionsFormat:"listQuestionsFormat",isLoadingListQuestions:"isLoadingListQuestions"},features:[r.TTD],decls:29,vars:7,consts:[[3,"formGroup"],["cdkDropListGroup","",1,"mb-0","row"],[1,"col-12","col-lg-8"],[1,"col-form-label","fw-bold","fs-6"],[1,"d-flex","my-2"],["name","status","data-control","select2","data-hide-search","true","formControlName","method",1,"form-select","form-select-solid","form-select-lg","fw-bold",3,"change"],["value","","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],["name","status","data-control","select2","data-hide-search","true","formControlName","provider",1,"form-select","form-select-solid","form-select-lg","fw-bold",3,"change"],["class","row","formArrayName","keyMappings",4,"ngFor","ngForOf"],[1,"input-group-text","addUser",3,"click"],[1,"col-12","col-lg-4","container-loading"],[4,"ngIf"],[1,"example-container"],["cdkDropList","",1,"",3,"cdkDropListData"],["class","question-box","cdkDrag","",4,"ngFor","ngForOf"],[3,"ngValue"],["formArrayName","keyMappings",1,"row"],[3,"formGroupName"],[1,"fw-bold","col-12","col-lg-4"],["type","text","formControlName","key",1,"form-control"],[1,"example-container","col-12","col-lg-6"],["cdkDropList","",1,"question-mapping-row",3,"cdkDropListData","cdkDropListSortingDisabled","cdkDropListDropped"],[1,"col-12","col-lg-2"],["class","btn btn-icon btn-bg-light btn-active-color-primary btn-sm",3,"click",4,"ngIf"],["cdkDrag","",1,"question-box"],[1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm",3,"click"],[1,"svg-icon","svg-icon-3",3,"inlineSVG"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"label",3),r._uU(4,"Ph\u01b0\u01a1ng th\u1ee9c"),r.qZA(),r.TgZ(5,"div",4),r.TgZ(6,"select",5),r.NdJ("change",function(t){return e.changeMethod(t)}),r.TgZ(7,"option",6),r._uU(8,"Ch\u1ecdn ph\u01b0\u01a1ng th\u1ee9c"),r.qZA(),r.YNc(9,We,2,2,"option",7),r.qZA(),r.qZA(),r.TgZ(10,"label",3),r._uU(11,"Nh\xe0 cung c\u1ea5p"),r.qZA(),r.TgZ(12,"div",4),r.TgZ(13,"select",8),r.NdJ("change",function(t){return e.changeProvider(t)}),r.TgZ(14,"option",6),r._uU(15,"Ch\u1ecdn nh\xe0 cung c\u1ea5p"),r.qZA(),r.YNc(16,ti,2,2,"option",7),r.qZA(),r.qZA(),r.TgZ(17,"label",3),r._uU(18,"Provider format"),r.qZA(),r.YNc(19,si,9,5,"div",9),r.TgZ(20,"span",10),r.NdJ("click",function(){return e.addPartnerFormat()}),r._uU(21,"+ Add Partner Format"),r.qZA(),r.qZA(),r.TgZ(22,"div",11),r.TgZ(23,"label",3),r._uU(24,"Question format"),r.qZA(),r.YNc(25,ni,1,0,"app-loading",12),r.TgZ(26,"div",13),r.TgZ(27,"div",14),r.YNc(28,oi,2,1,"div",15),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.Q6J("formGroup",e.form),r.xp6(9),r.Q6J("ngForOf",e.listMethods),r.xp6(7),r.Q6J("ngForOf",e.listProviders),r.xp6(3),r.Q6J("ngForOf",e.keyMappings.controls),r.xp6(6),r.Q6J("ngIf",e.isLoadingListQuestions),r.xp6(2),r.Q6J("cdkDropListData",e.listQuestionsFormat),r.xp6(1),r.Q6J("ngForOf",e.listQuestionsFormat))},directives:[o.JL,o.sg,Pt,o.EJ,o.JJ,o.u,o.YN,o.Kr,s.sg,s.O5,Et,o.CE,o.x0,o.Fj,Ot,n.d$,Ke],encapsulation:2,changeDetection:0}),t})();const ai=["myTextArea"];function hi(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",6),r.TgZ(1,"div",12),r.TgZ(2,"div",13),r.NdJ("click",function(){const e=r.CHM(t).$implicit;return r.oxw().selectText(e.value.key)}),r._uU(3),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(1),r.Q6J("cdkDropListData",t.value.key)("cdkDropListSortingDisabled",!1),r.xp6(2),r.Oqu(t.value.key)}}function li(t,e){if(1&t&&(r.TgZ(0,"div",14),r.TgZ(1,"label",15),r._uU(2,"Message preview: "),r.qZA(),r.TgZ(3,"div",16),r._UZ(4,"textarea",17),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.xp6(4),r.s9C("value",t),r.Q6J("disabled",!0)}}let ci=(()=>{class t{constructor(t,e,i){this.rootFormGroup=t,this.fb=e,this.cdr=i,this.unsubscribe=[],this.contentPreview={},this.contentPreviewList=[]}ngOnInit(){this.initForm()}get keyMappings(){return this.rootFormGroup.control.get("step2Form").get("keyMappings")}get questionMapping(){return this.rootFormGroup.control.get("step2Form").get("questionMapping")}initForm(){this.form=this.rootFormGroup.control.get(this.formGroupName),console.log(this.keyMappings);const t=this.form.valueChanges.subscribe(t=>{console.log("step3",t)});console.log(this.listQuestionsDataSample);let e={};this.listQuestionsFormat.forEach((t,i)=>{e[t]=this.listQuestionsDataSample[i]}),Object.keys(this.questionMapping.value).length?Object.keys(this.questionMapping.value).forEach(t=>{console.log(this.questionMapping.value[t]),this.contentPreview[t]=e[this.questionMapping.value[t]]}):this.keyMappings.value.forEach(t=>{this.contentPreview[t.key]=e[t.keyMap]}),console.log(this.contentPreview),this.setContentPreview(this.form.value.questionData),this.unsubscribe.push(t)}ngOnChanges(t){console.log(t)}drop(t){t.previousContainer===t.container?pt(t.container.data,t.previousIndex,t.currentIndex):(console.log(t.previousContainer.data),this.selectText(t.previousContainer.data))}selectText(t){const[e,i]=[this.myTextArea.nativeElement.selectionStart,this.myTextArea.nativeElement.selectionEnd];this.myTextArea.nativeElement.focus(),this.myTextArea.nativeElement.setRangeText(`{${t}}`,e,i,"select"),this.setContentPreview(this.myTextArea.nativeElement.value),this.cdr.markForCheck()}setContentPreview(t){this.contentPreviewList=[];let e=t;this.keyMappings.value.map(t=>t.key).forEach(t=>{const i=new RegExp(`{${t}}`,"g");e=e.replace(i,`${this.contentPreview[t]}`)}),this.contentPreviewList.push(e)}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(o.sg),r.Y36(o.qu),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-campaign-step3"]],viewQuery:function(t,e){if(1&t&&r.Gf(ai,5),2&t){let t;r.iGM(t=r.CRH())&&(e.myTextArea=t.first)}},inputs:{formGroupName:"formGroupName",listQuestionsDataSample:"listQuestionsDataSample",listQuestionsFormat:"listQuestionsFormat"},features:[r.TTD],decls:16,vars:3,consts:[[3,"formGroup"],["cdkDropListGroup","",1,"mb-0","row"],[1,"col-12","col-lg-3"],[1,"col-form-label","fw-bold","fs-6"],["class","row",4,"ngFor","ngForOf"],[1,"col-12","col-lg-9"],[1,"row"],[1,"col-12"],["formControlName","questionData","data-kt-autosize","true","cdkDropList","","rows","8",1,"form-control","pe-10","resize-none","min-h-25px",3,"cdkDropListDropped","keyup"],["myTextArea",""],[1,"mt-20"],["class","row mb-10",4,"ngFor","ngForOf"],["cdkDropList","",1,"question-mapping-row",3,"cdkDropListData","cdkDropListSortingDisabled"],["cdkDrag","",1,"question-box",3,"click"],[1,"row","mb-10"],[1,"col-form-label","fw-bold","fs-6","col-12","col-lg-3"],[1,"fw-bold","col-12","col-lg-9"],["rows","4",1,"form-control",3,"value","disabled"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"label",3),r._uU(4,"Provider format"),r.qZA(),r.YNc(5,hi,4,3,"div",4),r.qZA(),r.TgZ(6,"div",5),r.TgZ(7,"label",3),r._uU(8,"Message content"),r.qZA(),r.TgZ(9,"div",6),r.TgZ(10,"div",7),r.TgZ(11,"textarea",8,9),r.NdJ("cdkDropListDropped",function(t){return e.drop(t)})("keyup",function(t){return e.setContentPreview(t.target.value)}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(13,"h3",10),r._uU(14,"Preview message content"),r.qZA(),r.YNc(15,li,5,2,"div",11),r.qZA()),2&t&&(r.Q6J("formGroup",e.form),r.xp6(5),r.Q6J("ngForOf",e.keyMappings.controls),r.xp6(10),r.Q6J("ngForOf",e.contentPreviewList))},directives:[o.JL,o.sg,Pt,s.sg,o.Fj,o.JJ,o.u,Et,Ot],encapsulation:2,changeDetection:0}),t})(),di=(()=>{class t{constructor(t,e){this.fb=t,this.rootFormGroup=e,this.unsubscribe=[],this.date=new o.NI(new Date)}ngOnInit(){this.initForm()}initForm(){this.form=this.rootFormGroup.control.get(this.formGroupName);const t=this.form.valueChanges.subscribe(t=>{console.log("step4",t)});this.unsubscribe.push(t)}ngOnChanges(t){console.log(t)}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(o.qu),r.Y36(o.sg))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-campaign-step4"]],inputs:{formGroupName:"formGroupName"},features:[r.TTD],decls:22,vars:1,consts:[[3,"formGroup"],[1,"row"],[1,"col-12","col-lg-6"],[1,"col-form-label","fw-bold","fs-6"],[1,"d-flex","flex-column","mb-7","fv-row"],["type","date","formControlName","scheduleStartDate",1,"form-control"],["type","date","formControlName","scheduleEndDate",1,"form-control"],["type","time","formControlName","scheduleStartTime",1,"form-control"],["type","time","formControlName","scheduleEndTime",1,"form-control"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"label",3),r._uU(4,"Ng\xe0y b\u1eaft \u0111\u1ea7u: "),r.qZA(),r.TgZ(5,"div",4),r._UZ(6,"input",5),r.qZA(),r.qZA(),r.TgZ(7,"div",2),r.TgZ(8,"label",3),r._uU(9,"Ng\xe0y k\u1ebft th\xfac: "),r.qZA(),r.TgZ(10,"div",4),r._UZ(11,"input",6),r.qZA(),r.qZA(),r.TgZ(12,"div",2),r.TgZ(13,"label",3),r._uU(14,"Khung gi\u1edd b\u1eaft \u0111\u1ea7u: "),r.qZA(),r.TgZ(15,"div",4),r._UZ(16,"input",7),r.qZA(),r.qZA(),r.TgZ(17,"div",2),r.TgZ(18,"label",3),r._uU(19,"Khung gi\u1edd k\u1ebft th\xfac: "),r.qZA(),r.TgZ(20,"div",4),r._UZ(21,"input",8),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&r.Q6J("formGroup",e.form)},directives:[o.JL,o.sg,o.Fj,o.JJ,o.u],encapsulation:2,changeDetection:0}),t})();function pi(t,e){if(1&t&&(r.TgZ(0,"div",12),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.AsE(" ",t.key," : ",t.keyMap," ")}}let ui=(()=>{class t{constructor(t,e){this.fb=t,this.rootFormGroup=e,this.unsubscribe=[]}ngOnInit(){this.initForm()}get formTotal(){return this.rootFormGroup.control}initForm(){}ngOnChanges(t){console.log(t)}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(o.qu),r.Y36(o.sg))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-campaign-step5"]],inputs:{formGroupName:"formGroupName"},features:[r.TTD],decls:47,vars:7,consts:[["id","kt_profile_details_view",1,"card","mb-5","mb-xl-10"],[1,"card-header","cursor-pointer"],[1,"card-title","m-0"],[1,"fw-bolder","m-0"],[1,"card-body","p-9"],[1,"row","mb-7"],[1,"col-lg-4","fw-bold","text-muted"],[1,"col-lg-8"],[1,"fw-bolder","fs-6","text-dark"],[1,"col-lg-8","fv-row"],["class","fw-bold fs-6",4,"ngFor","ngForOf"],["href","#",1,"fw-bold","fs-6","text-dark","text-hover-primary"],[1,"fw-bold","fs-6"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"h3",3),r._uU(4,"Campaign Details"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(5,"div",4),r.TgZ(6,"div",5),r.TgZ(7,"label",6),r._uU(8,"Question name"),r.qZA(),r.TgZ(9,"div",7),r.TgZ(10,"span",8),r._uU(11),r.qZA(),r.qZA(),r.qZA(),r.TgZ(12,"div",5),r.TgZ(13,"label",6),r._uU(14,"Partner format"),r.qZA(),r.TgZ(15,"div",9),r.YNc(16,pi,2,2,"div",10),r.qZA(),r.qZA(),r.TgZ(17,"div",5),r.TgZ(18,"label",6),r._uU(19,"Message content"),r.qZA(),r.TgZ(20,"div",7),r.TgZ(21,"span",8),r._uU(22),r.qZA(),r.qZA(),r.qZA(),r.TgZ(23,"div",5),r.TgZ(24,"label",6),r._uU(25,"Start Date: "),r.qZA(),r.TgZ(26,"div",7),r.TgZ(27,"a",11),r._uU(28),r.qZA(),r.qZA(),r.qZA(),r.TgZ(29,"div",5),r.TgZ(30,"label",6),r._uU(31,"End Date: "),r.qZA(),r.TgZ(32,"div",7),r.TgZ(33,"a",11),r._uU(34),r.qZA(),r.qZA(),r.qZA(),r.TgZ(35,"div",5),r.TgZ(36,"label",6),r._uU(37,"Start Time: "),r.qZA(),r.TgZ(38,"div",7),r.TgZ(39,"a",11),r._uU(40),r.qZA(),r.qZA(),r.qZA(),r.TgZ(41,"div",5),r.TgZ(42,"label",6),r._uU(43,"End Time: "),r.qZA(),r.TgZ(44,"div",7),r.TgZ(45,"a",11),r._uU(46),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(11),r.Oqu(e.formTotal.value.step1Form.questionName),r.xp6(5),r.Q6J("ngForOf",e.formTotal.value.step2Form.keyMappings),r.xp6(6),r.Oqu(e.formTotal.value.step3Form.questionData),r.xp6(6),r.hij(" ",e.formTotal.value.step4Form.scheduleStartDate," "),r.xp6(6),r.hij(" ",e.formTotal.value.step4Form.scheduleEndDate," "),r.xp6(6),r.hij(" ",e.formTotal.value.step4Form.scheduleStartTime," "),r.xp6(6),r.hij(" ",e.formTotal.value.step4Form.scheduleEndTime," "))},directives:[s.sg],encapsulation:2,changeDetection:0}),t})();function gi(t,e){if(1&t&&(r.ynx(0),r._UZ(1,"app-campaign-step1",11),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("listQuestions",t.listQuestions)}}function _i(t,e){if(1&t&&(r.ynx(0),r._UZ(1,"app-campaign-step2",12),r.ALo(2,"async"),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("listMethods",t.listMethods)("listProviders",t.listProviders)("listQuestionsFormat",t.listQuestionsFormat)("isLoadingListQuestions",r.lcZ(2,4,t.isLoadingListQuestionsFormat$)||!1)}}function mi(t,e){if(1&t&&(r.ynx(0),r._UZ(1,"app-campaign-step3",13),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("listQuestionsFormat",t.listQuestionsFormat)("listQuestionsDataSample",t.listQuestionsDataSample)}}function fi(t,e){1&t&&(r.ynx(0),r._UZ(1,"app-campaign-step4",14),r.BQk())}function vi(t,e){1&t&&(r.ynx(0),r._UZ(1,"app-campaign-step5",15),r.BQk())}function bi(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"button",16),r.NdJ("click",function(){return r.CHM(t),r.oxw().prevStep()}),r._UZ(2,"span",17),r._uU(3," Back "),r.qZA(),r.BQk()}2&t&&(r.xp6(2),r.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr063.svg"))}function yi(t,e){1&t&&(r.ynx(0),r._uU(1),r._UZ(2,"span",20),r.BQk()),2&t&&(r.xp6(1),r.hij(" Continue "," "," "),r.xp6(1),r.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr064.svg"))}function wi(t,e){1&t&&(r.ynx(0),r._uU(1," Submit "),r.BQk())}function xi(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"div"),r.TgZ(2,"button",18),r.NdJ("click",function(){return r.CHM(t),r.oxw().nextStep()}),r.TgZ(3,"span",19),r.YNc(4,yi,3,2,"ng-container",8),r.YNc(5,wi,2,0,"ng-container",8),r.qZA(),r.qZA(),r.qZA(),r.BQk()}if(2&t){const t=r.oxw();r.xp6(4),r.Q6J("ngIf",t.currentStep$.value<t.formsCount-1),r.xp6(1),r.Q6J("ngIf",t.currentStep$.value===t.formsCount-1)}}const Si=function(t,e){return{current:t,completed:e}},Zi=function(t){return{current:t}};function Di(t,e){if(1&t&&(r.TgZ(0,"div",13),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.AsE(" ",t.key," : ",t.value," ")}}const Pi=function(t){return["/campaigns/edit",t]},Ti=[{path:"",component:Ne},{path:"edit/:id",component:(()=>{class t extends He{constructor(t,e,i,s,n,o,r,a){super(t,e,i,s,n,o,r,a),this.campaignsSrv=t,this.providersSrv=e,this.methodsSrv=i,this.activatedRoute=s,this.router=n,this.fb=o,this.cdr=r,this.datepipe=a,super.ngOnInit()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Fe),r.Y36(Ye.j),r.Y36(Ve.O),r.Y36(Ce.gz),r.Y36(Ce.F0),r.Y36(o.qu),r.Y36(r.sBO),r.Y36(s.uU))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-campaign-add"]],features:[r.qOj],decls:30,vars:27,consts:[[1,"card"],[1,"card-body"],["id","kt_create_account_stepper",1,"stepper","stepper-links","d-flex","flex-column","pt-15"],[1,"stepper-nav","mb-5"],[1,"stepper-item",3,"ngClass"],[1,"stepper-title"],["noValidate","","id","kt_create_account_form",1,"mx-auto","mw-600px","w-100","pt-15","pb-10",3,"formGroup"],[1,"current"],[4,"ngIf"],[1,"d-flex","flex-stack","pt-15"],[1,"mr-2"],["formGroupName","step1Form",1,"w-100",3,"listQuestions"],["formGroupName","step2Form",1,"w-100",3,"listMethods","listProviders","listQuestionsFormat","isLoadingListQuestions"],["formGroupName","step3Form",1,"w-100",3,"listQuestionsFormat","listQuestionsDataSample"],["formGroupName","step4Form",1,"w-100"],["formGroupName","step5Form",1,"w-100"],["type","button",1,"btn","btn-lg","btn-light-primary","me-3",3,"click"],[1,"svg-icon","svg-icon-4","me-1",3,"inlineSVG"],["type","button",1,"btn","btn-lg","btn-primary","me-3",3,"click"],[1,"indicator-label"],[1,"svg-icon","svg-icon-3","ms-2","me-0",3,"inlineSVG"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"div",4),r.TgZ(5,"h3",5),r._uU(6,"Ch\u1ecdn c\xe2u h\u1ecfi"),r.qZA(),r.qZA(),r.TgZ(7,"div",4),r.TgZ(8,"h3",5),r._uU(9,"C\u1ea5u tr\xfac c\xe2u h\u1ecfi"),r.qZA(),r.qZA(),r.TgZ(10,"div",4),r.TgZ(11,"h3",5),r._uU(12,"N\u1ed9i dung tin nh\u1eafn"),r.qZA(),r.qZA(),r.TgZ(13,"div",4),r.TgZ(14,"h3",5),r._uU(15,"L\u1ecbch tr\xecnh"),r.qZA(),r.qZA(),r.TgZ(16,"div",4),r.TgZ(17,"h3",5),r._uU(18,"Ki\u1ec3m duy\u1ec7t & g\u1eedi \u0111i"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(19,"form",6),r.TgZ(20,"div",7),r.YNc(21,gi,2,1,"ng-container",8),r.YNc(22,_i,3,6,"ng-container",8),r.YNc(23,mi,2,2,"ng-container",8),r.YNc(24,fi,2,0,"ng-container",8),r.YNc(25,vi,2,0,"ng-container",8),r.qZA(),r.TgZ(26,"div",9),r.TgZ(27,"div",10),r.YNc(28,bi,4,1,"ng-container",8),r.qZA(),r.YNc(29,xi,6,2,"ng-container",8),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(4),r.Q6J("ngClass",r.WLB(13,Si,1===e.currentStep$.value,e.currentStep$.value>1)),r.xp6(3),r.Q6J("ngClass",r.WLB(16,Si,2===e.currentStep$.value,e.currentStep$.value>2)),r.xp6(3),r.Q6J("ngClass",r.WLB(19,Si,3===e.currentStep$.value,e.currentStep$.value>3)),r.xp6(3),r.Q6J("ngClass",r.WLB(22,Si,4===e.currentStep$.value,e.currentStep$.value>4)),r.xp6(3),r.Q6J("ngClass",r.VKq(25,Zi,5===e.currentStep$.value)),r.xp6(3),r.Q6J("formGroup",e.campaignForm),r.xp6(2),r.Q6J("ngIf",1===e.currentStep$.value),r.xp6(1),r.Q6J("ngIf",2===e.currentStep$.value),r.xp6(1),r.Q6J("ngIf",3===e.currentStep$.value),r.xp6(1),r.Q6J("ngIf",4===e.currentStep$.value),r.xp6(1),r.Q6J("ngIf",5===e.currentStep$.value),r.xp6(3),r.Q6J("ngIf",1!==e.currentStep$.value),r.xp6(1),r.Q6J("ngIf",e.currentStep$.value!==e.formsCount))},directives:[s.mk,o._Y,o.JL,o.sg,s.O5,je,o.x0,ri,ci,di,ui,n.d$],pipes:[s.Ov],encapsulation:2,changeDetection:0}),t})()},{path:"view/:id",component:(()=>{class t extends He{constructor(t,e,i,s,n,o,r,a){super(t,e,i,s,n,o,r,a),this.campaignsSrv=t,this.providersSrv=e,this.methodsSrv=i,this.activatedRoute=s,this.router=n,this.fb=o,this.cdr=r,this.datepipe=a,super.ngOnInit()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Fe),r.Y36(Ye.j),r.Y36(Ve.O),r.Y36(Ce.gz),r.Y36(Ce.F0),r.Y36(o.qu),r.Y36(r.sBO),r.Y36(s.uU))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-campaign-view"]],features:[r.qOj],decls:50,vars:12,consts:[["id","kt_profile_details_view",1,"card","mb-5","mb-xl-10"],[1,"card-header","cursor-pointer"],[1,"card-title","m-0"],[1,"fw-bolder","m-0"],[1,"btn","btn-primary","align-self-center",3,"routerLink"],[1,"card-body","p-9"],[1,"row","mb-7"],[1,"col-lg-4","fw-bold","text-muted"],[1,"col-lg-8"],[1,"fw-bolder","fs-6","text-dark"],[1,"col-lg-8","fv-row"],["class","fw-bold fs-6",4,"ngFor","ngForOf"],["href","#",1,"fw-bold","fs-6","text-dark","text-hover-primary"],[1,"fw-bold","fs-6"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"h3",3),r._uU(4,"Campaign Details"),r.qZA(),r.qZA(),r.TgZ(5,"a",4),r._uU(6," Edit Campaign "),r.qZA(),r.qZA(),r.TgZ(7,"div",5),r.TgZ(8,"div",6),r.TgZ(9,"label",7),r._uU(10,"Question name"),r.qZA(),r.TgZ(11,"div",8),r.TgZ(12,"span",9),r._uU(13),r.qZA(),r.qZA(),r.qZA(),r.TgZ(14,"div",6),r.TgZ(15,"label",7),r._uU(16,"Partner format"),r.qZA(),r.TgZ(17,"div",10),r.YNc(18,Di,2,2,"div",11),r.ALo(19,"keyvalue"),r.qZA(),r.qZA(),r.TgZ(20,"div",6),r.TgZ(21,"label",7),r._uU(22,"Message content"),r.qZA(),r.TgZ(23,"div",8),r.TgZ(24,"span",9),r._uU(25),r.qZA(),r.qZA(),r.qZA(),r.TgZ(26,"div",6),r.TgZ(27,"label",7),r._uU(28,"Start Date: "),r.qZA(),r.TgZ(29,"div",8),r.TgZ(30,"a",12),r._uU(31),r.qZA(),r.qZA(),r.qZA(),r.TgZ(32,"div",6),r.TgZ(33,"label",7),r._uU(34,"End Date: "),r.qZA(),r.TgZ(35,"div",8),r.TgZ(36,"a",12),r._uU(37),r.qZA(),r.qZA(),r.qZA(),r.TgZ(38,"div",6),r.TgZ(39,"label",7),r._uU(40,"Start Time: "),r.qZA(),r.TgZ(41,"div",8),r.TgZ(42,"a",12),r._uU(43),r.qZA(),r.qZA(),r.qZA(),r.TgZ(44,"div",6),r.TgZ(45,"label",7),r._uU(46,"End Time: "),r.qZA(),r.TgZ(47,"div",8),r.TgZ(48,"a",12),r._uU(49),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(5),r.Q6J("routerLink",r.VKq(10,Pi,e.campaignDetail.id)),r.xp6(8),r.Oqu(e.campaignForm.value.step1Form.questionName),r.xp6(5),r.Q6J("ngForOf",r.lcZ(19,8,e.campaignForm.value.step2Form.questionMapping)),r.xp6(7),r.Oqu(e.campaignForm.value.step3Form.questionData),r.xp6(6),r.hij(" ",e.campaignForm.value.step4Form.scheduleStartDate," "),r.xp6(6),r.hij(" ",e.campaignForm.value.step4Form.scheduleEndDate," "),r.xp6(6),r.hij(" ",e.campaignForm.value.step4Form.scheduleStartTime," "),r.xp6(6),r.hij(" ",e.campaignForm.value.step4Form.scheduleEndTime," "))},directives:[Ce.yS,s.sg],pipes:[s.Nd],encapsulation:2,changeDetection:0}),t})()}];let ki=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Ce.Bz.forChild(Ti)],Ce.Bz]}),t})(),Ci=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Fe,s.uU],imports:[[s.ez,ki,n.vi,ke.QX,o.UX,Ft,Te,xe,Ze,ke.Il]]}),t})()}}]);